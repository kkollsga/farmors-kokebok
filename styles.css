/* BASE STYLES */
body { font-family: 'Inter', sans-serif; }
body.modal-open { overflow: hidden; position: relative; touch-action: none; }
.font-display { font-family: 'Playfair Display', serif; }

/* SAFE AREA */
.safe-bottom { padding-bottom: env(safe-area-inset-bottom, 0); }
.safe-top { padding-top: env(safe-area-inset-top, 0); }

/* SCROLLBAR */
.recipe-scroll::-webkit-scrollbar { width: 6px; }
.recipe-scroll::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 3px; }
.recipe-scroll::-webkit-scrollbar-thumb { background: #d4d4d4; border-radius: 3px; }
.recipe-scroll::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }

/* SEARCH BAR POSITIONING */
.search-bar-fixed { position: fixed; top: calc(env(safe-area-inset-top, 0px) + 12px); left: 50%; transform: translateX(-50%); z-index: 50; }
#unifiedGlassBar { transition: width 0.3s ease-out, height 0.3s ease-out, padding 0.3s ease-out; }
#standardContent.hidden, #minimumContent.hidden { display: none !important; }
#minimumContent { padding: 0; }

/* FILTER DROPDOWN */
#filterOptions { overscroll-behavior: contain; -webkit-overflow-scrolling: touch; }
#filterOptions {
    background: linear-gradient(white 30%, rgba(255,255,255,0)) center top,
                linear-gradient(rgba(255,255,255,0), white 70%) center bottom,
                linear-gradient(white, white) center;
    background-size: 100% 40px, 100% 40px, 100% 100%;
    background-attachment: local, local, scroll;
    background-repeat: no-repeat;
}

/* ANIMATIONS */
@keyframes tipHighlight {
    from { transform: translateX(-10px); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
}
@keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
}

/* CARD TRANSITIONS */
[data-recipe-id] { transition: opacity 0.3s ease-out; }
.recipe-counter { transition: transform 0.2s ease-out; }
.recipe-stars i { transition: color 0.2s ease-out, transform 0.2s ease-out; }

/* RECOMMENDATIONS */
#recommendedRecipes { transition: min-height 0.3s ease-out; position: relative; }
#recommendedRecipes > div { transition: opacity 0.3s ease-out, transform 0.3s ease-out; }

/* MODAL */
#recipeModal .absolute.inset-0 { -webkit-overflow-scrolling: touch; overscroll-behavior: contain; }
#recipeModal .fixed.top-4.right-4 { transition: transform 0.2s ease-out; }
#recipeModal .fixed.top-4.right-4:active { transform: scale(0.95); }
#recipeModal .rounded-t-3xl { box-shadow: 0 -20px 40px rgba(0,0,0,0.3), 0 -10px 20px rgba(0,0,0,0.2); }

/* DESKTOP MODAL */
@media (min-width: 901px) {
    #recipeModal .absolute.inset-0 { max-width: 1280px; margin: 0 auto; }
}

/* MOBILE RESPONSIVE */
@media (max-width: 768px) {
    #filterButtonText { display: none; }
    #searchInputContainer { min-width: 200px; }
    .search-bar-fixed { max-width: calc(100vw - 20px); }
}

/* iOS SPECIFIC */
@supports (-webkit-touch-callout: none) {
    #recipeModal .absolute.inset-0 { -webkit-overflow-scrolling: touch; }
    input[type="text"], input[type="search"], textarea, select { font-size: 16px !important; }
}

/* iOS PWA SAFE AREA */
@media screen and (max-width: 900px) and (orientation: portrait) {
    #recipeModal.fixed.inset-0.z-50:not(.bg-black) > div { padding-top: env(safe-area-inset-top, 0); }
}

/* iOS STANDALONE MODE */
@media (display-mode: standalone) {
    .search-bar-fixed { position: fixed !important; top: calc(env(safe-area-inset-top, 0px) + 8px) !important; left: 50% !important; transform: translateX(-50%) !important; z-index: 50 !important; }
    #searchFilterContainer.fixed { position: fixed !important; padding-top: 0 !important; }
    #searchFilterContainer:not(.search-bar-fixed) { position: relative !important; }
    #recipeModal.fixed.inset-0.z-50:not(.bg-black) > div { padding-top: max(env(safe-area-inset-top), 20px); }
    #unifiedGlassBar { position: relative !important; }
}

/* STANDALONE FULLSCREEN */
@media (display-mode: fullscreen) {
    .search-bar-fixed { position: fixed !important; top: calc(env(safe-area-inset-top, 0px) + 12px) !important; }
}

/* STANDALONE MINIMAL UI */
@media (display-mode: minimal-ui) {
    .search-bar-fixed { position: fixed !important; top: calc(env(safe-area-inset-top, 0px) + 12px) !important; }
}

/* LANDSCAPE */
@media (orientation: landscape) and (max-width: 900px) {
    .search-bar-fixed { top: calc(env(safe-area-inset-top, 0px) + 8px); }
    @media (display-mode: standalone) {
        .search-bar-fixed { top: calc(env(safe-area-inset-top, 0px) + 8px) !important; }
    }
}

.text-shadow { text-shadow: 0 1px 3px rgba(0,0,0,0.5); }

/* Add this to your existing style section */
.farmor-expanded {
    transform: scale(var(--scale-factor)) !important;
    z-index: 40;
    position: relative;
}

.farmor-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.3);
    z-index: 39;
    opacity: 0;
    transition: opacity 0.5s ease;
    pointer-events: none;
}

.farmor-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.signature-name {
    font-family: 'Kalam', cursive;
    font-weight: 700;
}